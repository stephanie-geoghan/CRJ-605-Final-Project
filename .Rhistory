library( readxl )  # for reading excel files
dat2 <- read_xlsx( here( OIS-DATA-CLEAN.xlsx ) )
library(here)
dat2 <- read_xlsx( here( OIS-DATA-CLEAN.xlsx ) )
dat2 <- read_xlsx( here( "OIS-DATA-CLEAN.xlsx" ) )
View(dat2)
rm( list = ls() )
library( here )    # for accessing local directory
library( dplyr )   # for working with the data
library( network ) # for building the networks
library( sna )     # for working with the network data
library( readxl )  # for reading excel files
dat2 <- read_xlsx( here( "OIS-DATA-EDITED.xlsx" ) )
names( dat2 )
table( table( dat2$INC_RPT ) )
dat.ois <- dat2 %>%
select( INC_RPT, REFERENCE_ID, PO_GENDER ) %>%  # keep the variables you need for the edgelist
group_by( INC_RPT )
View(dat.ois)
is.factor(dat2$REFERENCE_ID)
class(dat2$REFERENCE_ID)
is.na(dat2$REFERENCE_ID)
dat2 <- read_xlsx( here( "OIS-DATA-EDITED.xlsx", na = "NA" ) )
dat2 <- read_xlsx( here( "OIS-DATA-EDITED.xlsx" ), na = "NA" )
is.na(dat2$REFERENCE_ID)
dat2 <- read_xlsx(
here( "OIS-DATA-EDITED.xlsx" ), # call the local directory
na = "NA"                       # set character for missing values
)
# check the variables
names( dat2 )
# check the counts of duplicate incident ids
table( table( dat2$INC_RPT ) )
dat.ois2 <- dat2 %>%
select( INC_RPT, REFERENCE_ID, PO_GENDER ) %>%  # keep the variables you need for the edgelist
group_by( INC_RPT )
View(dat.ois2)
table( is.na( dat.ois2$REFERENCE_ID ) )
dat.ois2 <- dat2 %>%
na.omit()
table( is.na( dat.ois2$REFERENCE_ID ) )
?na.omit
dat.ois2 <- d.ois2 %>%
na.omit()
dat.ois2 <- dat2 %>%
select( INC_RPT, REFERENCE_ID, PO_GENDER ) %>%  # keep the variables you need for the edgelist
group_by( INC_RPT ) %>%                         # group by incident report
filter( n() > 1 ) %>%                           # only keep cases that involve more than 1 person arrested
ungroup()
# check missing ids
table( is.na( dat.ois2$REFERENCE_ID ) )
# drop 32 cases with missing ids
dat.ois2 <- dat.ois2 %>%
na.omit()
# check missing ids
table( is.na( dat.ois2$REFERENCE_ID ) )
